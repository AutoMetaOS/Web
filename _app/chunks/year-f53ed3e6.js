import{S as $,i as Z,s as T,e as k,t as S,k as N,c as D,a as j,h as E,m as w,d as p,b as J,g as R,J as i,a9 as z,aa as Y,j as A,E as c,v as U}from"./index-a063a824.js";const K=async t=>{const e=await fetch(`https://musicbrainz.org/ws/2/recording/${t}?fmt=json&inc=artists+releases`).then(a=>a.json());return e.artist=e["artist-credit"].map(a=>a.artist.name).join(", "),delete e["artist-credit"],e.date=e.releases[0].date,e.releases=e.releases[0].title,console.log(e),e},q={song:K},F=(t,e=!0)=>{const a=new RegExp('(\\,|\\r?\\n|\\r|^)(?:"((?:\\\\.|""|[^\\\\"])*)"|([^\\,"\\r\\n]*))',"gi");let n=null,r=[[]];for(;n=a.exec(t);)n[1].length&&n[1]!==","&&r.push([]),r[r.length-1].push(n[2]?n[2].replace(new RegExp('[\\\\"](.)',"g"),"$1"):n[3]);if(e){let h=r.shift();return r.map(f=>{let g=0;return h.reduce((m,I)=>(m[I]=f[g++],m),{})})}else return r},ae=async()=>fetch("https://docs.google.com/spreadsheets/d/1m0MTMPj42_cR2qIPDK7EPSCMnU1M0D42iZ4ZaiZD3NU/gviz/tq?tqx=out:csv&sheet=Plutoniumm").then(t=>t.text()).then(F);function B(t){let e,a,n,r,h,s,f,g,m,I,y,b,M,o={ctx:t,current:null,token:null,hasCatch:!1,pending:Q,then:L,catch:H,value:2};z(h=q.song(t[0].Song_id),o);let u={ctx:t,current:null,token:null,hasCatch:!1,pending:x,then:X,catch:W,value:1};return z(M=fetch(`https://coverartarchive.org/release/${t[0].Song_id}`).then(C),u),{c(){e=k("div"),a=S("MAIN "),n=k("br"),r=N(),o.block.c(),s=N(),f=k("br"),g=N(),m=k("br"),I=S(`
                IMAGE `),y=k("br"),b=N(),u.block.c(),this.h()},l(_){e=D(_,"DIV",{class:!0});var l=j(e);a=E(l,"MAIN "),n=D(l,"BR",{}),r=w(l),o.block.l(l),s=w(l),f=D(l,"BR",{}),g=w(l),m=D(l,"BR",{}),I=E(l,`
                IMAGE `),y=D(l,"BR",{}),b=w(l),u.block.l(l),l.forEach(p),this.h()},h(){J(e,"class","song")},m(_,l){R(_,e,l),i(e,a),i(e,n),i(e,r),o.block.m(e,o.anchor=null),o.mount=()=>e,o.anchor=s,i(e,s),i(e,f),i(e,g),i(e,m),i(e,I),i(e,y),i(e,b),u.block.m(e,u.anchor=null),u.mount=()=>e,u.anchor=null},p(_,l){t=_,o.ctx=t,l&1&&h!==(h=q.song(t[0].Song_id))&&z(h,o)||Y(o,t,l),u.ctx=t,l&1&&M!==(M=fetch(`https://coverartarchive.org/release/${t[0].Song_id}`).then(C))&&z(M,u)||Y(u,t,l)},d(_){_&&p(e),o.block.d(),o.token=null,o=null,u.block.d(),u.token=null,u=null}}}function H(t){return{c,l:c,m:c,p:c,d:c}}function L(t){let e=JSON.stringify(t[2])+"",a;return{c(){a=S(e)},l(n){a=E(n,e)},m(n,r){R(n,a,r)},p(n,r){r&1&&e!==(e=JSON.stringify(n[2])+"")&&A(a,e)},d(n){n&&p(a)}}}function Q(t){return{c,l:c,m:c,p:c,d:c}}function W(t){return{c,l:c,m:c,p:c,d:c}}function X(t){let e=t[1]+"",a,n,r=JSON.stringify(t[1])+"",h;return{c(){a=S(e),n=N(),h=S(r)},l(s){a=E(s,e),n=w(s),h=E(s,r)},m(s,f){R(s,a,f),R(s,n,f),R(s,h,f)},p(s,f){f&1&&e!==(e=s[1]+"")&&A(a,e),f&1&&r!==(r=JSON.stringify(s[1])+"")&&A(h,r)},d(s){s&&p(a),s&&p(n),s&&p(h)}}}function x(t){return{c,l:c,m:c,p:c,d:c}}function ee(t){let e,a,n=t[0].Year+"",r,h,s,f,g=t[0].Grade+"",m,I,y,b,M,o,u=JSON.stringify(t[0])+"",_,l=t[0].Song_id&&B(t);return{c(){e=k("div"),a=k("div"),r=S(n),h=N(),s=k("span"),f=S("("),m=S(g),I=S(")"),y=N(),b=k("div"),l&&l.c(),M=N(),o=k("div"),_=S(u),this.h()},l(v){e=D(v,"DIV",{class:!0});var d=j(e);a=D(d,"DIV",{class:!0});var O=j(a);r=E(O,n),h=w(O),s=D(O,"SPAN",{class:!0});var P=j(s);f=E(P,"("),m=E(P,g),I=E(P,")"),P.forEach(p),O.forEach(p),y=w(d),b=D(d,"DIV",{class:!0});var G=j(b);l&&l.l(G),G.forEach(p),M=w(d),o=D(d,"DIV",{class:!0});var V=j(o);_=E(V,u),V.forEach(p),d.forEach(p),this.h()},h(){J(s,"class","hover svelte-58zle4"),J(a,"class","head p-rel fw7 svelte-58zle4"),J(b,"class","body"),J(o,"class","fw7"),J(e,"class","p10 indi p-rel svelte-58zle4")},m(v,d){R(v,e,d),i(e,a),i(a,r),i(a,h),i(a,s),i(s,f),i(s,m),i(s,I),i(e,y),i(e,b),l&&l.m(b,null),i(e,M),i(e,o),i(o,_)},p(v,[d]){d&1&&n!==(n=v[0].Year+"")&&A(r,n),d&1&&g!==(g=v[0].Grade+"")&&A(m,g),v[0].Song_id?l?l.p(v,d):(l=B(v),l.c(),l.m(b,null)):l&&(l.d(1),l=null),d&1&&u!==(u=JSON.stringify(v[0])+"")&&A(_,u)},i:c,o:c,d(v){v&&p(e),l&&l.d()}}}const C=t=>t.text();function te(t,e,a){let{data:n={Year:"2000",Grade:"0"}}=e;return U(()=>{}),t.$$set=r=>{"data"in r&&a(0,n=r.data)},[n]}class ne extends ${constructor(e){super(),Z(this,e,te,ee,T,{data:0})}}export{ne as Y,ae as g};
