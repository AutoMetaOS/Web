import{n as g}from"./notifs-708c8c3d.js";import{a as b}from"./index-99e896be.js";import{w as m}from"./index-cfd1276c.js";import{$}from"./index-132e5a0e.js";const _={AES_KEY:"Punam@2601",YT_KEY:"AIzaSyDFZfyjFBWARwcMJp1aGxwV5HxXADV25H8",RSS2JSON:"irrofo19vgtxw0zab9e6qdnswybwxf18cks2pn3j",db:{pub:"hmwaoksv",priv:"8894c311-8da2-46ed-b961-ab8102398a72",user:"AMOSdb",pass:"kyCpor-3punqi-pyfryr"}},r=_.YT_KEY,c=t=>fetch("https://youtube.googleapis.com/youtube/v3"+t,{method:"GET",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer"}).then(e=>e.json()),k=(t,e=3)=>c(`/playlistItems?part=snippet%2CcontentDetails&playlistId=${t}&key=${r}&maxResults=${e}`),x=t=>c(`/search?part=snippet&key=${r}&q=${t}&type=video&maxResults=10`),D=t=>c(`/search?channelId=${t}&part=snippet&order=date&maxResults=5&key=${r}`),S=async t=>{const e=`/channels?part=snippet%2CcontentDetails&id=${t.map(a=>a.id).join("%2C")}&key=${r}`,o=await c(e);return o.error&&g.send("Daily YT Quota Exceeded",1e3,{from:"ursus",scale:"danger"}),(await Promise.all(o.items.map(a=>a.contentDetails.relatedPlaylists.uploads).map(async a=>(await k(a+"&order=date",5)).items))).flat().filter(a=>(new Date-new Date(a.contentDetails.videoPublishedAt))/864e5<4)},{F:d}=b,w=m({local_id:"yt-"+1e11,youtube_id:null}),y=m({show_next:!1}),h=t=>{console.log(t);const{slug:e,title:o,id:s}=t,n=`https://www.youtube-nocookie.com/embed/${e}?autoplay=1&enablejsapi=1&local=${s}`;return window.history.pushState("","",`?id=${e}`),w.set({local_id:s,youtube_id:n}),window.scrollTo(0,0),document.title=o,0},f=t=>{var p,u;t||(t=(u=(p=d("iframe"))==null?void 0:p.src)==null?void 0:u.split("local=")[1].split("&")[0]);const e=t==null?void 0:t.split("-"),[o,s]=[e[0]||"yt",+e[1]||0];if(s===0)return null;const n=d(`#${o}-${s-1}`)||null,{title:a,slug:l}=(n==null?void 0:n.dataset)||{};return{id:`${o}-${s-1}`,next:n,type:o==="yt"?"snippet":"stack",count:s-1,image:n==null?void 0:n.querySelector("img").src,title:a,slug:l}},T=t=>{f(t)&&h(f(t))};let i=0;const v=t=>{y.set({show_next:t.timeLeft<=30}),t.timeLeft<=5&&(T($(w).local_id),y.set({show_next:!1}))},A=t=>{if(t.data.charAt(0)!=="{")return;const{duration:e,currentTime:o}=JSON.parse(t.data).info||{};e&&(i=e);const s=~~(i-o),n={length:e/60,timeLeft:s||i,fracLeft:s?s/i:1};return v(n),0},L=(t,e)=>{const o=JSON.stringify(e);t!=null&&t.contentWindow&&t.contentWindow.postMessage(o,"*")},R=t=>{t=0|(Date.now()-new Date(t))/1e3;let e,o={second:60,minute:60,hour:24,day:7,week:4.35,month:12,year:1e4},s;for(e in o)if(s=t%o[e],!(t=0|t/o[e]))return s+" "+(s-1?e+"s":e)},N={search:x,channel:D,getRecents:S},I={videoSet:h,onMessage:A,postMessage:L,timeSince:R};export{y as a,f as g,w as n,I as p,h as v,N as y};
