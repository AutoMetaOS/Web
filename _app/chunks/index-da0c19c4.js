import{p as I}from"./index-acbfbb82.js";import{d as x,w as y}from"./index-a67a2886.js";import{c as w}from"./_commonjsHelpers-c771f69b.js";const h={type:{scale:"info",from:"amos"},time:3e3};function T(r){const c=y([]),n=(s,i=h.time,a=h.type)=>c.update(o=>[...o,{id:`_${Math.random().toString(36).slice(2,9)}`,type:a.scale,from:a.from,message:s,timeout:i%3e3}]),u=x(c,(s,i)=>{if(i(s),s.length>0){const a=setTimeout(()=>{c.update(o=>(o.shift(),o))},s[0].timeout);return()=>clearTimeout(a)}}),{subscribe:l}=u;return{subscribe:l,send:n}}const k=T();var S={exports:{}};(function(r,c){(function(n,u){r.exports=u()})(w,function(){var n={};if(n.isLSAvailable=function(){var t="_";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch{return!1}}(),n.isLSAvailable){var u=100,l=200,s=localStorage,i={},a=!1,o={},g=function(){for(var t in i){var e=s.getItem(t);if(e&&o[t]&&o[t].indexOf(e)===-1){o[t].push(e);try{var m=JSON.parse(e);m&&(e=m)}catch{}for(var p=0;p<i[t].length;p++)i[t][p](e);s.getItem(t+"-removeit")||(s.setItem(t+"-removeit","1"),function(d){setTimeout(function(){s.removeItem(d),s.removeItem(d+"-removeit"),o[t]=[]},l)}(t))}else e||(o[t]=[])}return setTimeout(g,u),!0};n.send=function(t,e){var m="";typeof e=="function"&&(e=e()),m=typeof e=="object"?JSON.stringify(e):e,s.setItem(t,m)},n.subscribe=function(t,e){i[t]||(i[t]=[],o[t]=[]),i[t].push(e),a||(a=g())},n.unsubscribe=function(t){i[t]&&(i[t]=[]),o[t]&&(o[t]=[])},n.getBuffer=function(){return o}}else n.send=n.subscribe=function(){throw new Error("localStorage not supported.")};return n})})(S);var b=S.exports;const v={channel:"internal",callback:function(r){console.log(r)}},N={anncounce:(r=v.channel,c)=>(console.log(r,c),b.send(r,c),0),listen:(r=c.channel,c=v.callback)=>(console.log(r,c),b.subscribe(r,c),0),mute:(r=v.channel)=>b.unsubscribe(r)},f={token:null,getId:()=>(f.token&&(f.token=I.exports.math.uuid()),f.token)},J=k,L=N;export{L as i,J as n,f as s};
