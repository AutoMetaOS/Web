import{S,i as A,s as D,e as g,k as y,t as N,c as v,a as I,m as $,h as R,d as f,b as c,G as k,f as q,g as M,H as u,j as G,l as x,E as T,M as U,v as V}from"./index-ef3d5a38.js";const C=r=>{const a=t=>t.replace("TIL that","").replace("TIL about","").replace("TIL :","").replace("TIL:","").replace("TIL","").replace("Today I Learned","").trim(),s=t=>{var l,i;if(t===void 0)return"AMOS Search";let n;if(t[0].resolutions.length>0){const d=t[0].resolutions;n=d.length>1?d[1].url:d[0].url}else n=(i=(l=t[0])==null?void 0:l.source)==null?void 0:i.url;return n};return r.data.children.map(t=>{var l;const n=t.data;return{desc:a(n.title),href:n.url,image:s((l=n.preview)==null?void 0:l.images).replaceAll("&amp;","&")}})},H=r=>({title:r.titles.display,desc:r.extract_html,image:r.thumbnail.source,href:r.content_urls.desktop.page}),O={reddit:C,wikipedia:H},j=(r,a)=>fetch(r).then(s=>s.json()).then(s=>O[a](s)),z=(r,a="new",s=1)=>j(`https://www.reddit.com/r/${r}/${a}/.json?limit=${s}`,"reddit");function b(r,a,s){const e=r.slice();return e[1]=a[s],e}function E(r){let a,s,e,t,n,l,i,d=r[1].desc+"",_,p,w;return{c(){a=g("div"),s=g("div"),e=g("img"),l=y(),i=g("a"),_=N(d),w=y(),this.h()},l(o){a=v(o,"DIV",{class:!0,rel:!0});var h=I(a);s=v(h,"DIV",{class:!0,style:!0});var m=I(s);e=v(m,"IMG",{class:!0,src:!0,height:!0,width:!0,alt:!0}),l=$(m),i=v(m,"A",{class:!0,href:!0});var L=I(i);_=R(L,d),L.forEach(f),m.forEach(f),w=$(h),h.forEach(f),this.h()},h(){c(e,"class","rx2"),k(e.src,t=r[1].image)||c(e,"src",t),c(e,"height","64px"),c(e,"width","64px"),c(e,"alt",n=new URL(r[1].href).origin),c(i,"class","post svelte-73m5ow"),c(i,"href",p=r[1].href),c(s,"class","\u0192"),q(s,"width","250px"),c(a,"class","p5 rx5 blur svelte-73m5ow"),c(a,"rel","external")},m(o,h){M(o,a,h),u(a,s),u(s,e),u(s,l),u(s,i),u(i,_),u(a,w)},p(o,h){h&1&&!k(e.src,t=o[1].image)&&c(e,"src",t),h&1&&n!==(n=new URL(o[1].href).origin)&&c(e,"alt",n),h&1&&d!==(d=o[1].desc+"")&&G(_,d),h&1&&p!==(p=o[1].href)&&c(i,"href",p)},d(o){o&&f(a)}}}function B(r){let a,s=r[0],e=[];for(let t=0;t<s.length;t+=1)e[t]=E(b(r,s,t));return{c(){for(let t=0;t<e.length;t+=1)e[t].c();a=x()},l(t){for(let n=0;n<e.length;n+=1)e[n].l(t);a=x()},m(t,n){for(let l=0;l<e.length;l+=1)e[l].m(t,n);M(t,a,n)},p(t,[n]){if(n&1){s=t[0];let l;for(l=0;l<s.length;l+=1){const i=b(t,s,l);e[l]?e[l].p(i,n):(e[l]=E(i),e[l].c(),e[l].m(a.parentNode,a))}for(;l<e.length;l+=1)e[l].d(1);e.length=s.length}},i:T,o:T,d(t){U(e,t),t&&f(a)}}}function F(r,a,s){let e=[];return V(()=>{z("technews","new",10).then(t=>{s(0,e=t)})}),[e]}class K extends S{constructor(a){super(),A(this,a,F,B,D,{})}}export{K as N,z as g};
