import{S as W,i as X,s as $,w as F,x as G,y as J,q as A,o as C,B as K,e as I,t as M,k as B,c as P,a as w,h as N,d as S,m as V,b as d,f as L,g as Q,H as m,W as j,I as T,j as Y,p as Z,M as x,X as ee,v as te,n as se,a8 as ne}from"../../../chunks/index-ef3d5a38.js";import{p as z,y as ae}from"../../../chunks/index-408cb143.js";import le from"../components/videoCard.svelte-e20a33d3.js";import"../../../chunks/index-99e896be.js";import"../../../chunks/index-5ae5593d.js";function H(l,s,i){const e=l.slice();return e[6]=s[i],e[8]=i,e}function O(l){let s,i;return s=new le({props:{type:"snippet",count:l[8],title:l[6].snippet.title,slug:l[6].snippet.resourceId.videoId,image:l[6].snippet.thumbnails.medium.url,details:[l[6].snippet.channelTitle,z.timeSince(l[6].contentDetails.videoPublishedAt)]}}),{c(){F(s.$$.fragment)},l(e){G(s.$$.fragment,e)},m(e,u){J(s,e,u),i=!0},p(e,u){const c={};u&3&&(c.title=e[6].snippet.title),u&3&&(c.slug=e[6].snippet.resourceId.videoId),u&3&&(c.image=e[6].snippet.thumbnails.medium.url),u&3&&(c.details=[e[6].snippet.channelTitle,z.timeSince(e[6].contentDetails.videoPublishedAt)]),s.$set(c)},i(e){i||(A(s.$$.fragment,e),i=!0)},o(e){C(s.$$.fragment,e),i=!1},d(e){K(s,e)}}}function ie(l){let s,i,e,u,c=l[1].length+"",h,v,b,p,r,D,k,g,y,U,f=l[1].sort(l[5]).slice(0,l[0]*4),a=[];for(let t=0;t<f.length;t+=1)a[t]=O(H(l,f,t));const R=t=>C(a[t],1,1,()=>{a[t]=null});return{c(){s=I("section"),i=I("div"),e=I("span"),u=M("Updates ("),h=M(c),v=M(")"),b=B(),p=I("span"),r=I("input"),k=B();for(let t=0;t<a.length;t+=1)a[t].c();this.h()},l(t){s=P(t,"SECTION",{class:!0,id:!0});var o=w(s);i=P(o,"DIV",{class:!0});var n=w(i);e=P(n,"SPAN",{});var _=w(e);u=N(_,"Updates ("),h=N(_,c),v=N(_,")"),_.forEach(S),b=V(n),p=P(n,"SPAN",{style:!0});var q=w(p);r=P(q,"INPUT",{type:!0,min:!0,max:!0}),q.forEach(S),n.forEach(S),k=V(o);for(let E=0;E<a.length;E+=1)a[E].l(o);o.forEach(S),this.h()},h(){d(r,"type","range"),d(r,"min",0),d(r,"max",D=Math.ceil(l[1].flat().length/4)),L(p,"font-size","1.25rem"),d(i,"class","w-100 \u0192 p5 \u2206-bw"),d(s,"class","\u0192 p20 \u0192\u2211"),d(s,"id","updates")},m(t,o){Q(t,s,o),m(s,i),m(i,e),m(e,u),m(e,h),m(e,v),m(i,b),m(i,p),m(p,r),j(r,l[0]),m(s,k);for(let n=0;n<a.length;n+=1)a[n].m(s,null);g=!0,y||(U=[T(e,"click",l[2]),T(r,"change",l[4]),T(r,"input",l[4])],y=!0)},p(t,[o]){if((!g||o&2)&&c!==(c=t[1].length+"")&&Y(h,c),(!g||o&2&&D!==(D=Math.ceil(t[1].flat().length/4)))&&d(r,"max",D),o&1&&j(r,t[0]),o&3){f=t[1].sort(t[5]).slice(0,t[0]*4);let n;for(n=0;n<f.length;n+=1){const _=H(t,f,n);a[n]?(a[n].p(_,o),A(a[n],1)):(a[n]=O(_),a[n].c(),A(a[n],1),a[n].m(s,null))}for(se(),n=f.length;n<a.length;n+=1)R(n);Z()}},i(t){if(!g){for(let o=0;o<f.length;o+=1)A(a[o]);g=!0}},o(t){a=a.filter(Boolean);for(let o=0;o<a.length;o+=1)C(a[o]);g=!1},d(t){t&&S(s),x(a,t),y=!1,ee(U)}}}function oe(l,s,i){let e,{set:u}=s;const c=()=>i(1,e=[]);let h=4;te(()=>{Promise.all(u==null?void 0:u.map(r=>ae.getRecents(r.channels))).then(r=>i(1,e=r.flat()))});function v(){h=ne(this.value),i(0,h)}const b=(p,r)=>new Date(r.contentDetails.videoPublishedAt)-new Date(p.contentDetails.videoPublishedAt);return l.$$set=p=>{"set"in p&&i(3,u=p.set)},i(1,e=[]),[h,e,c,u,v,b]}class he extends W{constructor(s){super(),X(this,s,oe,ie,$,{set:3})}}export{he as default};
