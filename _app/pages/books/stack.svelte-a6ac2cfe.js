import{S as d,i as g,s as b,w as k,x as v,y as w,q as u,o as f,B as $,e as q,c as B,a as S,d as m,b as y,g as C,p as I,M,v as j,n as D}from"../../chunks/index-ef3d5a38.js";import{s as E}from"../../chunks/index-50aceac0.js";import L from"./components/book.svelte-a809c623.js";import{b as V,p as z}from"../../chunks/functions-c0c723cc.js";import"../../chunks/index-5ae5593d.js";function h(a,s,r){const o=a.slice();return o[5]=s[r],o}function _(a){let s,r;return s=new L({props:{objective:"todo",id:a[2](a[5].bk_id),title:a[5].title,author:a[5].author,image:a[5].image,published:a[5].published}}),{c(){k(s.$$.fragment)},l(o){v(s.$$.fragment,o)},m(o,t){w(s,o,t),r=!0},p(o,t){const i={};t&3&&(i.id=o[2](o[5].bk_id)),t&3&&(i.title=o[5].title),t&3&&(i.author=o[5].author),t&3&&(i.image=o[5].image),t&3&&(i.published=o[5].published),s.$set(i)},i(o){r||(u(s.$$.fragment,o),r=!0)},o(o){f(s.$$.fragment,o),r=!1},d(o){$(s,o)}}}function A(a){let s,r,o=a[1].filter(a[4]),t=[];for(let n=0;n<o.length;n+=1)t[n]=_(h(a,o,n));const i=n=>f(t[n],1,1,()=>{t[n]=null});return{c(){s=q("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){s=B(n,"DIV",{class:!0});var l=S(s);for(let e=0;e<t.length;e+=1)t[e].l(l);l.forEach(m),this.h()},h(){y(s,"class","\u0192 \u0192\u2211 \u2206-bw w-100 svelte-78oqvi")},m(n,l){C(n,s,l);for(let e=0;e<t.length;e+=1)t[e].m(s,null);r=!0},p(n,[l]){if(l&15){o=n[1].filter(n[4]);let e;for(e=0;e<o.length;e+=1){const c=h(n,o,e);t[e]?(t[e].p(c,l),u(t[e],1)):(t[e]=_(c),t[e].c(),u(t[e],1),t[e].m(s,null))}for(D(),e=o.length;e<t.length;e+=1)i(e);I()}},i(n){if(!r){for(let l=0;l<o.length;l+=1)u(t[l]);r=!0}},o(n){t=t.filter(Boolean);for(let l=0;l<t.length;l+=1)f(t[l]);r=!1},d(n){n&&m(s),M(t,n)}}}function F(a,s,r){let o,{omni:t=""}=s;const i=e=>(V.update(c=>[...c,e||"1"]),e),n=(e,c)=>e.some(p=>p.toLowerCase().includes(c));j(()=>E.list("books").then(e=>r(1,o=e)));const l=e=>n([e.title,e.author],z.form.basic(t).text);return a.$$set=e=>{"omni"in e&&r(0,t=e.omni)},r(1,o=[]),[t,o,i,n,l]}class O extends d{constructor(s){super(),g(this,s,F,A,b,{omni:0})}}export{O as default};
