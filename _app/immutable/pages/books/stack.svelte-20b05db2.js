import{S as w,i as q,s as S,l as m,g,q as c,w as B,x as y,y as $,o as u,B as C,p as v,X as D,d as h,e as I,c as M,a as j,b as A,v as E,n as b}from"../../chunks/index-f6cfea4e.js";import{S as F}from"../../chunks/index-30071b0e.js";import L from"./components/book.svelte-6c5bd9dd.js";import{p as N,b as O}from"../../chunks/functions-4c4d8597.js";import"../../chunks/index-ff9ff7c9.js";function p(s,l,i){const e=s.slice();return e[5]=l[i],e}function _(s){let l,i,e=s[0],t=[];for(let n=0;n<e.length;n+=1)t[n]=d(p(s,e,n));const r=n=>u(t[n],1,1,()=>{t[n]=null});return{c(){for(let n=0;n<t.length;n+=1)t[n].c();l=m()},l(n){for(let a=0;a<t.length;a+=1)t[a].l(n);l=m()},m(n,a){for(let o=0;o<t.length;o+=1)t[o].m(n,a);g(n,l,a),i=!0},p(n,a){if(a&3){e=n[0];let o;for(o=0;o<e.length;o+=1){const f=p(n,e,o);t[o]?(t[o].p(f,a),c(t[o],1)):(t[o]=d(f),t[o].c(),c(t[o],1),t[o].m(l.parentNode,l))}for(b(),o=e.length;o<t.length;o+=1)r(o);v()}},i(n){if(!i){for(let a=0;a<e.length;a+=1)c(t[a]);i=!0}},o(n){t=t.filter(Boolean);for(let a=0;a<t.length;a+=1)u(t[a]);i=!1},d(n){D(t,n),n&&h(l)}}}function d(s){let l,i;return l=new L({props:{objective:"todo",id:s[1](s[5].bk_id),title:s[5].title,author:s[5].author,image:s[5].image,published:s[5].published}}),{c(){B(l.$$.fragment)},l(e){y(l.$$.fragment,e)},m(e,t){$(l,e,t),i=!0},p(e,t){const r={};t&1&&(r.id=e[1](e[5].bk_id)),t&1&&(r.title=e[5].title),t&1&&(r.author=e[5].author),t&1&&(r.image=e[5].image),t&1&&(r.published=e[5].published),l.$set(r)},i(e){i||(c(l.$$.fragment,e),i=!0)},o(e){u(l.$$.fragment,e),i=!1},d(e){C(l,e)}}}function T(s){let l,i,e=s[0].length>1&&_(s);return{c(){l=I("div"),e&&e.c(),this.h()},l(t){l=M(t,"DIV",{class:!0});var r=j(l);e&&e.l(r),r.forEach(h),this.h()},h(){A(l,"class","\u0192 \u0192\u2211 \u2206-bw w-100 svelte-78oqvi")},m(t,r){g(t,l,r),e&&e.m(l,null),i=!0},p(t,[r]){t[0].length>1?e?(e.p(t,r),r&1&&c(e,1)):(e=_(t),e.c(),c(e,1),e.m(l,null)):e&&(b(),u(e,1,1,()=>{e=null}),v())},i(t){i||(c(e),i=!0)},o(t){u(e),i=!1},d(t){t&&h(l),e&&e.d()}}}function U(s,l,i){let e,t,{omni:r=""}=l;const n=o=>(O.update(f=>[...f,o||"1"]),o),a=(o,f)=>o.some(k=>k.toLowerCase().includes(f));return E(()=>F.list("books").then(o=>i(3,e=o))),s.$$set=o=>{"omni"in o&&i(2,r=o.omni)},s.$$.update=()=>{s.$$.dirty&12&&i(0,t=e.filter(o=>a([o.title,o.author],N.form.basic(r).text)))},i(3,e=[]),[t,n,r,e]}class J extends w{constructor(l){super(),q(this,l,U,T,S,{omni:2})}}export{J as default};
