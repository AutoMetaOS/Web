var x=Object.defineProperty,S=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var b=(s,e,t)=>e in s?x(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,g=(s,e)=>{for(var t in e||(e={}))B.call(e,t)&&b(s,t,e[t]);if(p)for(var t of p(e))C.call(e,t)&&b(s,t,e[t]);return s},h=(s,e)=>S(s,z(e));import{S as D}from"./index-30071b0e.js";import{$ as E,S as H,i as A,s as F,e as $,a0 as q,c as I,a as _,a1 as J,d,a2 as v,_ as m,b as N,g as j,J as O,T,a3 as U,z as V,l as y,E as k,C as G}from"./index-3a01bbf7.js";import{w as K}from"./index-cf574cb9.js";const P=s=>fetch(`https://openlibrary.org${s}`).then(e=>e.json()),Q=async s=>{let e="q=";return s.author&&(e=`author=${s.author}`),s.default&&(e=`q=${s.default}`),(await P(`/search.json?${e}`)).docs},R=s=>{if(!s)return"Unknown";if(typeof s=="string")return s;if(typeof s=="object"){const e=[...new Set(s.map(t=>t.trim()))];return e.length>3?`${e.slice(0,3).join(", ")} et al.`:e.join(", ")}},W=s=>{if(s.length===0)return"";if(typeof s=="string")return`(${+s})`;if(typeof s=="object")return`(${+s[0]})`},L={basic:s=>{let e="default",t="";return s.split(":").length>1?[e,t]=s.split(":"):t=s,[t,e].map(a=>a.trim().toLowerCase()),{type:e,text:t}},search:s=>{const{type:e,text:t}=L.basic(s);return e==="author"?{author:t}:{default:t}}},X=s=>{let e="suggest";const t=s.cover_edition_key||s.bk_id||s.id;return E(tt).includes(t)&&(e="added"),h(g({},s),{objective:e})},f={error:[{tag:"path",attributes:[["d","M2 30 L30 2 M30 30 L2 2"]],style:[["background","#f00a"]]}],added:[{tag:"path",attributes:[["d","M2 20 L12 28 30 4"]],style:[["background","#0f0a"]]}],suggest:[{tag:"path",attributes:[["d","M16 2 L16 30 M2 16 L30 16"]],"data-func":"add",style:[["background","#0aff"]]}],todo:[{tag:"path",attributes:[["d","M2 20 L12 28 30 4"]],"data-func":"add",style:[["background","#0cc"]]}]},Y=s=>{console.log(s,f[s]);const{style:e}=f[s][0];return{style:e==null?void 0:e.map(a=>a.join(":")).join(";"),"data-func":f[s][0]["data-func"]}},Z=s=>{var t;const e=(t=f[s])==null?void 0:t.map(a=>{const{attributes:r,tag:c}=a,i=r==null?void 0:r.map(o=>`${o[0]}="${o[1]}"`).join(" ");return`<${c} ${i}/>`});return e==null?void 0:e.join(" ")},tt=K([]),it={search:Q},u={author:R,published:W,results:X,form:L,attributes:Y,icons:Z};function w(s){let e,t,a=u.icons(s[0])+"",r,c,i=[u.attributes(s[0]),{viewBox:"0 0 32 32"},{fill:"none"},{stroke:"#fff"}],o={};for(let n=0;n<i.length;n+=1)o=G(o,i[n]);return{c(){e=$("div"),t=q("svg"),this.h()},l(n){e=I(n,"DIV",{class:!0});var l=_(e);t=J(l,"svg",{viewBox:!0,fill:!0,stroke:!0});var M=_(t);M.forEach(d),l.forEach(d),this.h()},h(){v(t,o),m(t,"svelte-1bzbbx6",!0),N(e,"class","funcs \u0192 \u2206-bw p10 svelte-1bzbbx6")},m(n,l){j(n,e,l),O(e,t),t.innerHTML=a,r||(c=T(e,"click",U(s[1])),r=!0)},p(n,l){l&1&&a!==(a=u.icons(n[0])+"")&&(t.innerHTML=a),v(t,o=V(i,[l&1&&u.attributes(n[0]),{viewBox:"0 0 32 32"},{fill:"none"},{stroke:"#fff"}])),m(t,"svelte-1bzbbx6",!0)},d(n){n&&d(e),r=!1,c()}}}function et(s){let e,t=s[0]&&s[0]!=="null"&&w(s);return{c(){t&&t.c(),e=y()},l(a){t&&t.l(a),e=y()},m(a,r){t&&t.m(a,r),j(a,e,r)},p(a,[r]){a[0]&&a[0]!=="null"?t?t.p(a,r):(t=w(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:k,o:k,d(a){t&&t.d(a),a&&d(e)}}}function st(s,e,t){let{objective:a="suggest",data:r={title:"",image:"",id:"",published:"",author:""}}=e;const c=o=>D.put("books",Date.now().toString(36),o).then(n=>{console.log(n),n.charAt(0)=='"'?t(0,a="added"):t(0,a="error")}),i=o=>{const{func:n}=o.target.dataset;n==="add"&&c(r)};return s.$$set=o=>{"objective"in o&&t(0,a=o.objective),"data"in o&&t(2,r=o.data)},[a,i,r]}class lt extends H{constructor(e){super(),A(this,e,st,et,F,{objective:0,data:2})}}export{lt as F,it as a,tt as b,u as p};
