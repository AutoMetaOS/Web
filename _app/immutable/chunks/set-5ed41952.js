import{S as L,i as V,s as z,w as J,x as X,y as F,q as P,o as q,B as H,e as v,t as G,k as C,c as k,a as S,h as E,d as w,m as M,b as _,f as K,g as Q,J as h,a4 as N,T,j as W,p as Z,X as x,G as ee,v as te,n as ne,ad as se}from"./index-f6cfea4e.js";import{p as B}from"./index-f98c54c3.js";import ae from"../pages/stream/components/videoCard.svelte-a9886684.js";const ie=(e=[],t={})=>{let s="https://api.nukes.in";typeof e=="string"?s+=`/${e}`:Array.isArray(e)&&(s+=`/${e.filter(Boolean).join("/")}`);const n=new URL(s);return t&&Object.keys(t).forEach(o=>n.searchParams.append(o,t[o])),n},le=async e=>{let t=null;const s=await fetch(e);try{t=s.json()}catch{t=s.text()}return t},oe={async makeAndGet(e,t){const s=ie(e,t);return le(s)},async getMetadata(e){return await this.makeAndGet(["quick","metadata"],{url:e})},async getSearchSuggestion(e){return await this.makeAndGet(["quick","suggest"],{q:e})},async getTweetData(e){return await this.makeAndGet(["social","twitter"],{id:e})},async getYoutubeRecents(e){const t=typeof e=="string"?e:e.join(",");return await this.makeAndGet(["social","youtube"],{do:"recents",id:t})},async getYoutubeSearch(e){return await this.makeAndGet(["social","youtube"],{do:"search",id:e})}};function O(e,t,s){const n=e.slice();return n[6]=t[s],n[8]=s,n}function Y(e){let t,s;return t=new ae({props:{type:"snippet",count:e[8],title:e[6].snippet.title,slug:e[6].snippet.resourceId.videoId,image:e[6].snippet.thumbnails.medium.url,details:[e[6].snippet.channelTitle,B.timeSince(e[6].contentDetails.videoPublishedAt)]}}),{c(){J(t.$$.fragment)},l(n){X(t.$$.fragment,n)},m(n,o){F(t,n,o),s=!0},p(n,o){const u={};o&3&&(u.title=n[6].snippet.title),o&3&&(u.slug=n[6].snippet.resourceId.videoId),o&3&&(u.image=n[6].snippet.thumbnails.medium.url),o&3&&(u.details=[n[6].snippet.channelTitle,B.timeSince(n[6].contentDetails.videoPublishedAt)]),t.$set(u)},i(n){s||(P(t.$$.fragment,n),s=!0)},o(n){q(t.$$.fragment,n),s=!1},d(n){H(t,n)}}}function re(e){let t,s,n,o,u=e[1].length+"",m,b,A,p,c,g,D,y,I,R,f=e[1].sort(e[5]).slice(0,e[0]*4),l=[];for(let a=0;a<f.length;a+=1)l[a]=Y(O(e,f,a));const $=a=>q(l[a],1,1,()=>{l[a]=null});return{c(){t=v("section"),s=v("div"),n=v("span"),o=G("Updates ("),m=G(u),b=G(")"),A=C(),p=v("span"),c=v("input"),D=C();for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){t=k(a,"SECTION",{class:!0,id:!0});var r=S(t);s=k(r,"DIV",{class:!0});var i=S(s);n=k(i,"SPAN",{});var d=S(n);o=E(d,"Updates ("),m=E(d,u),b=E(d,")"),d.forEach(w),A=M(i),p=k(i,"SPAN",{style:!0});var U=S(p);c=k(U,"INPUT",{type:!0,min:!0,max:!0}),U.forEach(w),i.forEach(w),D=M(r);for(let j=0;j<l.length;j+=1)l[j].l(r);r.forEach(w),this.h()},h(){_(c,"type","range"),_(c,"min",0),_(c,"max",g=Math.ceil(e[1].flat().length/4)),K(p,"font-size","1.25rem"),_(s,"class","w-100 \u0192 p5 \u2206-bw"),_(t,"class","\u0192 p20 \u0192\u2211"),_(t,"id","updates")},m(a,r){Q(a,t,r),h(t,s),h(s,n),h(n,o),h(n,m),h(n,b),h(s,A),h(s,p),h(p,c),N(c,e[0]),h(t,D);for(let i=0;i<l.length;i+=1)l[i].m(t,null);y=!0,I||(R=[T(n,"click",e[2]),T(c,"change",e[4]),T(c,"input",e[4])],I=!0)},p(a,[r]){if((!y||r&2)&&u!==(u=a[1].length+"")&&W(m,u),(!y||r&2&&g!==(g=Math.ceil(a[1].flat().length/4)))&&_(c,"max",g),r&1&&N(c,a[0]),r&3){f=a[1].sort(a[5]).slice(0,a[0]*4);let i;for(i=0;i<f.length;i+=1){const d=O(a,f,i);l[i]?(l[i].p(d,r),P(l[i],1)):(l[i]=Y(d),l[i].c(),P(l[i],1),l[i].m(t,null))}for(ne(),i=f.length;i<l.length;i+=1)$(i);Z()}},i(a){if(!y){for(let r=0;r<f.length;r+=1)P(l[r]);y=!0}},o(a){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)q(l[r]);y=!1},d(a){a&&w(t),x(l,a),I=!1,ee(R)}}}function ce(e,t,s){let n,{set:o}=t;const u=()=>s(1,n=[]);let m=4;te(()=>{Promise.all(o==null?void 0:o.map(c=>oe.getYoutubeRecents(c.channels.map(g=>g.id).join("%2C")))).then(c=>s(1,n=c.flat()))});function b(){m=se(this.value),s(0,m)}const A=(p,c)=>new Date(c.contentDetails.videoPublishedAt)-new Date(p.contentDetails.videoPublishedAt);return e.$$set=p=>{"set"in p&&s(3,o=p.set)},s(1,n=[]),[m,n,u,o,b,A]}class me extends L{constructor(t){super(),V(this,t,ce,re,z,{set:3})}}export{oe as A,me as S};
