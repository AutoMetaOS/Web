import{S as $,i as Z,s as T,e as k,t as S,k as N,c as D,a as w,h as z,m as y,d as p,b as j,g as J,J as i,a9 as P,aa as Y,j as R,E as o}from"./index-3a01bbf7.js";const U=async t=>{const e=await fetch(`https://musicbrainz.org/ws/2/recording/${t}?fmt=json&inc=artists+releases`).then(a=>a.json());return e.artist=e["artist-credit"].map(a=>a.artist.name).join(", "),delete e["artist-credit"],e.date=e.releases[0].date,e.releases=e.releases[0].title,console.log(e),e},q={song:U},K=(t,e=!0)=>{const a=new RegExp('(\\,|\\r?\\n|\\r|^)(?:"((?:\\\\.|""|[^\\\\"])*)"|([^\\,"\\r\\n]*))',"gi");let n=null,r=[[]];for(;n=a.exec(t);)n[1].length&&n[1]!==","&&r.push([]),r[r.length-1].push(n[2]?n[2].replace(new RegExp('[\\\\"](.)',"g"),"$1"):n[3]);if(e){let u=r.shift();return r.map(f=>{let g=0;return u.reduce((m,E)=>(m[E]=f[g++],m),{})})}else return r},le=async()=>fetch("https://docs.google.com/spreadsheets/d/1m0MTMPj42_cR2qIPDK7EPSCMnU1M0D42iZ4ZaiZD3NU/gviz/tq?tqx=out:csv&sheet=Plutoniumm").then(t=>t.text()).then(K);function B(t){let e,a,n,r,u,s,f,g,m,E,M,b,I,c={ctx:t,current:null,token:null,hasCatch:!1,pending:L,then:H,catch:F,value:2};P(u=q.song(t[0].Song_id),c);let h={ctx:t,current:null,token:null,hasCatch:!1,pending:X,then:W,catch:Q,value:1};return P(I=fetch(`https://coverartarchive.org/release/${t[0].Song_id}`).then(C),h),{c(){e=k("div"),a=S("MAIN "),n=k("br"),r=N(),c.block.c(),s=N(),f=k("br"),g=N(),m=k("br"),E=S(`
                IMAGE `),M=k("br"),b=N(),h.block.c(),this.h()},l(_){e=D(_,"DIV",{class:!0});var l=w(e);a=z(l,"MAIN "),n=D(l,"BR",{}),r=y(l),c.block.l(l),s=y(l),f=D(l,"BR",{}),g=y(l),m=D(l,"BR",{}),E=z(l,`
                IMAGE `),M=D(l,"BR",{}),b=y(l),h.block.l(l),l.forEach(p),this.h()},h(){j(e,"class","song")},m(_,l){J(_,e,l),i(e,a),i(e,n),i(e,r),c.block.m(e,c.anchor=null),c.mount=()=>e,c.anchor=s,i(e,s),i(e,f),i(e,g),i(e,m),i(e,E),i(e,M),i(e,b),h.block.m(e,h.anchor=null),h.mount=()=>e,h.anchor=null},p(_,l){t=_,c.ctx=t,l&1&&u!==(u=q.song(t[0].Song_id))&&P(u,c)||Y(c,t,l),h.ctx=t,l&1&&I!==(I=fetch(`https://coverartarchive.org/release/${t[0].Song_id}`).then(C))&&P(I,h)||Y(h,t,l)},d(_){_&&p(e),c.block.d(),c.token=null,c=null,h.block.d(),h.token=null,h=null}}}function F(t){return{c:o,l:o,m:o,p:o,d:o}}function H(t){let e=JSON.stringify(t[2])+"",a;return{c(){a=S(e)},l(n){a=z(n,e)},m(n,r){J(n,a,r)},p(n,r){r&1&&e!==(e=JSON.stringify(n[2])+"")&&R(a,e)},d(n){n&&p(a)}}}function L(t){return{c:o,l:o,m:o,p:o,d:o}}function Q(t){return{c:o,l:o,m:o,p:o,d:o}}function W(t){let e=t[1]+"",a,n,r=JSON.stringify(t[1])+"",u;return{c(){a=S(e),n=N(),u=S(r)},l(s){a=z(s,e),n=y(s),u=z(s,r)},m(s,f){J(s,a,f),J(s,n,f),J(s,u,f)},p(s,f){f&1&&e!==(e=s[1]+"")&&R(a,e),f&1&&r!==(r=JSON.stringify(s[1])+"")&&R(u,r)},d(s){s&&p(a),s&&p(n),s&&p(u)}}}function X(t){return{c:o,l:o,m:o,p:o,d:o}}function x(t){let e,a,n=t[0].Year+"",r,u,s,f,g=t[0].Grade+"",m,E,M,b,I,c,h=JSON.stringify(t[0])+"",_,l=t[0].Song_id&&B(t);return{c(){e=k("div"),a=k("div"),r=S(n),u=N(),s=k("span"),f=S("("),m=S(g),E=S(")"),M=N(),b=k("div"),l&&l.c(),I=N(),c=k("div"),_=S(h),this.h()},l(v){e=D(v,"DIV",{class:!0});var d=w(e);a=D(d,"DIV",{class:!0});var A=w(a);r=z(A,n),u=y(A),s=D(A,"SPAN",{class:!0});var O=w(s);f=z(O,"("),m=z(O,g),E=z(O,")"),O.forEach(p),A.forEach(p),M=y(d),b=D(d,"DIV",{class:!0});var G=w(b);l&&l.l(G),G.forEach(p),I=y(d),c=D(d,"DIV",{class:!0});var V=w(c);_=z(V,h),V.forEach(p),d.forEach(p),this.h()},h(){j(s,"class","hover svelte-58zle4"),j(a,"class","head p-rel fw7 svelte-58zle4"),j(b,"class","body"),j(c,"class","fw7"),j(e,"class","p10 indi p-rel svelte-58zle4")},m(v,d){J(v,e,d),i(e,a),i(a,r),i(a,u),i(a,s),i(s,f),i(s,m),i(s,E),i(e,M),i(e,b),l&&l.m(b,null),i(e,I),i(e,c),i(c,_)},p(v,[d]){d&1&&n!==(n=v[0].Year+"")&&R(r,n),d&1&&g!==(g=v[0].Grade+"")&&R(m,g),v[0].Song_id?l?l.p(v,d):(l=B(v),l.c(),l.m(b,null)):l&&(l.d(1),l=null),d&1&&h!==(h=JSON.stringify(v[0])+"")&&R(_,h)},i:o,o,d(v){v&&p(e),l&&l.d()}}}const C=t=>t.text();function ee(t,e,a){let{data:n={Year:"2000",Grade:"0"}}=e;return t.$$set=r=>{"data"in r&&a(0,n=r.data)},[n]}class ae extends ${constructor(e){super(),Z(this,e,ee,x,T,{data:0})}}export{ae as Y,le as g};
