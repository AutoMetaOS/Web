import{w as p}from"./index-ff9ff7c9.js";import{a as m}from"./index-5303bb93.js";import{_ as y}from"./index-f6cfea4e.js";const{F:r}=m,f=p({local_id:"yt-"+1e11,youtube_id:null}),a=p({show_next:!1}),g=t=>{console.log(t);const{slug:e,title:s,id:o}=t,n=`https://www.youtube-nocookie.com/embed/${e}?autoplay=1&enablejsapi=1&local=${o}`;return window.history.pushState("","",`?id=${e}`),f.set({local_id:o,youtube_id:n}),window.scrollTo(0,0),document.title=s,0},u=t=>{var i,l;t||(t=(l=(i=r("iframe"))==null?void 0:i.src)==null?void 0:l.split("local=")[1].split("&")[0]);const e=t==null?void 0:t.split("-"),[s,o]=[e[0]||"yt",+e[1]||0];if(o===0)return null;const n=r(`#${s}-${o-1}`)||null,{title:w,slug:d}=(n==null?void 0:n.dataset)||{};return{id:`${s}-${o-1}`,next:n,type:s==="yt"?"snippet":"stack",count:o-1,image:n==null?void 0:n.querySelector("img").src,title:w,slug:d}},h=t=>{u(t)&&g(u(t))};let c=0;const _=t=>{a.set({show_next:t.timeLeft<=30}),t.timeLeft<=5&&(h(y(f).local_id),a.set({show_next:!1}))},b=t=>{if(t.data.charAt(0)!=="{")return;const{duration:e,currentTime:s}=JSON.parse(t.data).info||{};e&&(c=e);const o=~~(c-s),n={length:e/60,timeLeft:o||c,fracLeft:o?o/c:1};return _(n),0},$=(t,e)=>{const s=JSON.stringify(e);t!=null&&t.contentWindow&&t.contentWindow.postMessage(s,"*")},L=t=>{t=0|(Date.now()-new Date(t))/1e3;let e,s={second:60,minute:60,hour:24,day:7,week:4.35,month:12,year:1e4},o;for(e in s)if(o=t%s[e],!(t=0|t/s[e]))return o+" "+(o-1?e+"s":e)},x={videoSet:g,onMessage:b,postMessage:$,timeSince:L};export{a,u as g,f as n,x as p,g as v};
