var X=Object.defineProperty,T=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var O=(t,e,s)=>e in t?X(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,P=(t,e)=>{for(var s in e||(e={}))$.call(e,s)&&O(t,s,e[s]);if(N)for(var s of N(e))ee.call(e,s)&&O(t,s,e[s]);return t},Q=(t,e)=>T(t,x(e));import{D as te,a5 as se,S as ie,i as ae,s as le,t as z,h as E,g as U,j as q,d,e as j,k as B,w as re,c as k,a as I,m as F,x as ne,b as h,J as f,y as oe,q as ue,o as ce,B as fe,M as R}from"./vendor-4e7e0afc.js";import de from"../pages/books/components/functions.svelte-f262e55a.js";const he=t=>fetch(`https://openlibrary.org${t}`).then(e=>e.json()),_e=async t=>{let e="q=";return t.author&&(e=`author=${t.author}`),t.default&&(e=`q=${t.default}`),(await he(`/search.json?${e}`)).docs},ve=te([]),me=t=>t?t.filter(e=>!/[^a-zA-Z]/i.test(e)).map(e=>e.toLowerCase().trim()).slice(0,4).join(", "):[],pe=t=>{if(!t)return"Unknown";if(typeof t=="string")return t;if(typeof t=="object"){const e=[...new Set(t.map(s=>s.trim()))];return e.length>3?`${e.slice(0,3).join(", ")} et al.`:e.join(", ")}},be=t=>{if(typeof t=="string")return+t;if(typeof t=="object")return+t[0]},ge=t=>{let e="default",s="";return t.split(":").length>1?[e,s]=t.split(":"):s=t,[s,e].map(l=>l.trim().toLowerCase()),e==="author"?{author:s}:{default:s}},je=t=>{let e="suggest";return se(ve).includes(t.cover_i+"")&&(e="added"),Q(P({},t),{objective:e})},Ve={search:_e},y={form:ge,author:pe,tags:me,published:be,results:je},Ce={cover_edition_key:"default",title:"Fetching...",author_name:[],publish_year:[],tags:[],cover_i:null};function ke(t){let e,s=t[1].trim()+"",l;return{c(){e=j("div"),l=z(s),this.h()},l(i){e=k(i,"DIV",{class:!0});var a=I(e);l=E(a,s),a.forEach(d),this.h()},h(){h(e,"class","dummy \u2020c \u0192 w-100 h-100 svelte-1cv8zp6")},m(i,a){U(i,e,a),f(e,l)},p(i,a){a&2&&s!==(s=i[1].trim()+"")&&q(l,s)},d(i){i&&d(e)}}}function ye(t){let e,s;return{c(){e=j("img"),this.h()},l(l){e=k(l,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){h(e,"class","w-100 h-100 svelte-1cv8zp6"),R(e.src,s=`https://covers.openlibrary.org/b/id/${t[2]}-M.jpg`)||h(e,"src",s),h(e,"alt",t[1])},m(l,i){U(l,e,i)},p(l,i){i&4&&!R(e.src,s=`https://covers.openlibrary.org/b/id/${l[2]}-M.jpg`)&&h(e,"src",s),i&2&&h(e,"alt",l[1])},d(l){l&&d(e)}}}function W(t){let e,s=(y.published(t[5])||"Unknown")+"",l,i;return{c(){e=z("("),l=z(s),i=z(")")},l(a){e=E(a,"("),l=E(a,s),i=E(a,")")},m(a,c){U(a,e,c),U(a,l,c),U(a,i,c)},p(a,c){c&32&&s!==(s=(y.published(a[5])||"Unknown")+"")&&q(l,s)},d(a){a&&d(e),a&&d(l),a&&d(i)}}}function we(t){let e,s,l,i,a,c=y.author(t[6])+"",m,w,D,v,n=y.tags(t[3])+"",S,H,V,M=t[1].toUpperCase()+"",L,J,p,b;function Y(r,u){return r[2]?ye:ke}let A=Y(t),_=A(t),o=t[5]&&W(t);return p=new de({props:{objective:t[0],data:t[7]}}),{c(){e=j("div"),s=j("div"),_.c(),l=B(),i=j("div"),a=j("div"),m=z(c),w=B(),o&&o.c(),D=B(),v=j("div"),S=z(n),H=B(),V=j("h5"),L=z(M),J=B(),re(p.$$.fragment),this.h()},l(r){e=k(r,"DIV",{id:!0,class:!0});var u=I(e);s=k(u,"DIV",{class:!0});var C=I(s);_.l(C),C.forEach(d),l=F(u),i=k(u,"DIV",{class:!0});var g=I(i);a=k(g,"DIV",{});var G=I(a);m=E(G,c),w=F(G),o&&o.l(G),G.forEach(d),D=F(g),v=k(g,"DIV",{class:!0});var Z=I(v);S=E(Z,n),Z.forEach(d),H=F(g),V=k(g,"H5",{class:!0});var K=I(V);L=E(K,M),K.forEach(d),J=F(g),ne(p.$$.fragment,g),g.forEach(d),u.forEach(d),this.h()},h(){h(s,"class","p-rel"),h(v,"class","tags svelte-1cv8zp6"),h(V,"class","title o-0 svelte-1cv8zp6"),h(i,"class","body p-rel svelte-1cv8zp6"),h(e,"id",t[4]),h(e,"class","book \u0192 m10 svelte-1cv8zp6")},m(r,u){U(r,e,u),f(e,s),_.m(s,null),f(e,l),f(e,i),f(i,a),f(a,m),f(a,w),o&&o.m(a,null),f(i,D),f(i,v),f(v,S),f(i,H),f(i,V),f(V,L),f(i,J),oe(p,i,null),b=!0},p(r,[u]){A===(A=Y(r))&&_?_.p(r,u):(_.d(1),_=A(r),_&&(_.c(),_.m(s,null))),(!b||u&64)&&c!==(c=y.author(r[6])+"")&&q(m,c),r[5]?o?o.p(r,u):(o=W(r),o.c(),o.m(a,null)):o&&(o.d(1),o=null),(!b||u&8)&&n!==(n=y.tags(r[3])+"")&&q(S,n),(!b||u&2)&&M!==(M=r[1].toUpperCase()+"")&&q(L,M);const C={};u&1&&(C.objective=r[0]),u&128&&(C.data=r[7]),p.$set(C),(!b||u&16)&&h(e,"id",r[4])},i(r){b||(ue(p.$$.fragment,r),b=!0)},o(r){ce(p.$$.fragment,r),b=!1},d(r){r&&d(e),_.d(),o&&o.d(),fe(p)}}}function De(t,e,s){let l,{objective:i="sugg",title:a="",image:c="",tags:m=[],id:w,published:D=new Date().getFullYear(),author:v=""}=e;return t.$$set=n=>{"objective"in n&&s(0,i=n.objective),"title"in n&&s(1,a=n.title),"image"in n&&s(2,c=n.image),"tags"in n&&s(3,m=n.tags),"id"in n&&s(4,w=n.id),"published"in n&&s(5,D=n.published),"author"in n&&s(6,v=n.author)},t.$$.update=()=>{t.$$.dirty&126&&s(7,l={title:a,image:c,tags:y.tags(m),bk_id:w,published:D[0],author:y.author(v)})},[i,a,c,m,w,D,v,l]}class Ue extends ie{constructor(e){super();ae(this,e,De,we,le,{objective:0,title:1,image:2,tags:3,id:4,published:5,author:6})}}export{Ue as B,Ve as a,Ce as b,ve as c,y as p};
