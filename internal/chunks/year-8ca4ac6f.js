import{S as $,i as Z,s as T,e as k,t as S,k as N,c as D,a as y,h as E,m as j,d as p,b as R,g as A,H as i,a0 as z,a1 as Y,j as J,I as c,v as U}from"./vendor-8db968e4.js";const H=async t=>{const e=await fetch(`https://musicbrainz.org/ws/2/recording/${t}?fmt=json&inc=artists+releases`).then(a=>a.json());return e.artist=e["artist-credit"].map(a=>a.artist.name).join(", "),delete e["artist-credit"],e.date=e.releases[0].date,e.releases=e.releases[0].title,console.log(e),e},q={song:H},K=(t,e=!0)=>{const a=new RegExp('(\\,|\\r?\\n|\\r|^)(?:"((?:\\\\.|""|[^\\\\"])*)"|([^\\,"\\r\\n]*))',"gi");let n=null,r=[[]];for(;n=a.exec(t);)n[1].length&&n[1]!==","&&r.push([]),r[r.length-1].push(n[2]?n[2].replace(new RegExp('[\\\\"](.)',"g"),"$1"):n[3]);if(e){let h=r.shift();return r.map(d=>{let g=0;return h.reduce((m,I)=>(m[I]=d[g++],m),{})})}else return r},ae=async()=>fetch("https://docs.google.com/spreadsheets/d/1m0MTMPj42_cR2qIPDK7EPSCMnU1M0D42iZ4ZaiZD3NU/gviz/tq?tqx=out:csv&sheet=Plutoniumm").then(t=>t.text()).then(K);function B(t){let e,a,n,r,h,s,d,g,m,I,w,b,M,o={ctx:t,current:null,token:null,hasCatch:!1,pending:Q,then:L,catch:F,value:2};z(h=q.song(t[0].Song_id),o);let u={ctx:t,current:null,token:null,hasCatch:!1,pending:x,then:X,catch:W,value:1};return z(M=fetch(`https://coverartarchive.org/release/${t[0].Song_id}`).then(C),u),{c(){e=k("div"),a=S("MAIN "),n=k("br"),r=N(),o.block.c(),s=N(),d=k("br"),g=N(),m=k("br"),I=S(`
                IMAGE `),w=k("br"),b=N(),u.block.c(),this.h()},l(_){e=D(_,"DIV",{class:!0});var l=y(e);a=E(l,"MAIN "),n=D(l,"BR",{}),r=j(l),o.block.l(l),s=j(l),d=D(l,"BR",{}),g=j(l),m=D(l,"BR",{}),I=E(l,`
                IMAGE `),w=D(l,"BR",{}),b=j(l),u.block.l(l),l.forEach(p),this.h()},h(){R(e,"class","song")},m(_,l){A(_,e,l),i(e,a),i(e,n),i(e,r),o.block.m(e,o.anchor=null),o.mount=()=>e,o.anchor=s,i(e,s),i(e,d),i(e,g),i(e,m),i(e,I),i(e,w),i(e,b),u.block.m(e,u.anchor=null),u.mount=()=>e,u.anchor=null},p(_,l){t=_,o.ctx=t,l&1&&h!==(h=q.song(t[0].Song_id))&&z(h,o)||Y(o,t,l),u.ctx=t,l&1&&M!==(M=fetch(`https://coverartarchive.org/release/${t[0].Song_id}`).then(C))&&z(M,u)||Y(u,t,l)},d(_){_&&p(e),o.block.d(),o.token=null,o=null,u.block.d(),u.token=null,u=null}}}function F(t){return{c,l:c,m:c,p:c,d:c}}function L(t){let e=JSON.stringify(t[2])+"",a;return{c(){a=S(e)},l(n){a=E(n,e)},m(n,r){A(n,a,r)},p(n,r){r&1&&e!==(e=JSON.stringify(n[2])+"")&&J(a,e)},d(n){n&&p(a)}}}function Q(t){return{c,l:c,m:c,p:c,d:c}}function W(t){return{c,l:c,m:c,p:c,d:c}}function X(t){let e=t[1]+"",a,n,r=JSON.stringify(t[1])+"",h;return{c(){a=S(e),n=N(),h=S(r)},l(s){a=E(s,e),n=j(s),h=E(s,r)},m(s,d){A(s,a,d),A(s,n,d),A(s,h,d)},p(s,d){d&1&&e!==(e=s[1]+"")&&J(a,e),d&1&&r!==(r=JSON.stringify(s[1])+"")&&J(h,r)},d(s){s&&p(a),s&&p(n),s&&p(h)}}}function x(t){return{c,l:c,m:c,p:c,d:c}}function ee(t){let e,a,n=t[0].Year+"",r,h,s,d,g=t[0].Grade+"",m,I,w,b,M,o,u=JSON.stringify(t[0])+"",_,l=t[0].Song_id&&B(t);return{c(){e=k("div"),a=k("div"),r=S(n),h=N(),s=k("span"),d=S("("),m=S(g),I=S(")"),w=N(),b=k("div"),l&&l.c(),M=N(),o=k("div"),_=S(u),this.h()},l(v){e=D(v,"DIV",{class:!0});var f=y(e);a=D(f,"DIV",{class:!0});var O=y(a);r=E(O,n),h=j(O),s=D(O,"SPAN",{class:!0});var P=y(s);d=E(P,"("),m=E(P,g),I=E(P,")"),P.forEach(p),O.forEach(p),w=j(f),b=D(f,"DIV",{class:!0});var G=y(b);l&&l.l(G),G.forEach(p),M=j(f),o=D(f,"DIV",{class:!0});var V=y(o);_=E(V,u),V.forEach(p),f.forEach(p),this.h()},h(){R(s,"class","hover svelte-58zle4"),R(a,"class","head p-rel fw7 svelte-58zle4"),R(b,"class","body"),R(o,"class","fw7"),R(e,"class","p10 indi p-rel svelte-58zle4")},m(v,f){A(v,e,f),i(e,a),i(a,r),i(a,h),i(a,s),i(s,d),i(s,m),i(s,I),i(e,w),i(e,b),l&&l.m(b,null),i(e,M),i(e,o),i(o,_)},p(v,[f]){f&1&&n!==(n=v[0].Year+"")&&J(r,n),f&1&&g!==(g=v[0].Grade+"")&&J(m,g),v[0].Song_id?l?l.p(v,f):(l=B(v),l.c(),l.m(b,null)):l&&(l.d(1),l=null),f&1&&u!==(u=JSON.stringify(v[0])+"")&&J(_,u)},i:c,o:c,d(v){v&&p(e),l&&l.d()}}}const C=t=>t.text();function te(t,e,a){let{data:n={Year:"2000",Grade:"0"}}=e;return U(()=>{}),t.$$set=r=>{"data"in r&&a(0,n=r.data)},[n]}class ne extends ${constructor(e){super();Z(this,e,te,ee,T,{data:0})}}export{ne as Y,ae as g};
