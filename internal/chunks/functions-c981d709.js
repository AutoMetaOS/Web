import{s as i}from"./molecular-e392fe60.js";import{C as m}from"./vendor-0412d674.js";const p=m([]),w=()=>{fetch(i+"stack/").then(s=>s.json()).then(s=>{p.set(s)})},u=async s=>{const o=i+"/requestMetadata?url="+encodeURI(s);return await(await fetch(o)).json()},g=async s=>{const o=s.map(a=>fetch("http://api.tvmaze.com/singlesearch/shows?q="+a.name)),n=await Promise.all(o).then(async a=>Promise.all(a.map(async e=>await e.json()))),r=n.map(a=>{var e,t;return console.log(a._links),fetch((t=(e=a._links)==null?void 0:e.previousepisode)==null?void 0:t.href.replace("http:","https:"))});return(await Promise.all(r).then(async a=>Promise.all(a.map(async e=>await e.json())))).map((a,e)=>{var t,c;return{key:e,name:s[e].name,last_seen:+new Date(s[e].day)+864e5,airstamp:+new Date(a.airstamp),ep:a.name,abt:a.summary||"No Description Available",image:((t=a.image)==null?void 0:t.original)||((c=n[e].image)==null?void 0:c.original)}}).filter((a,e)=>a.last_seen<a.airstamp?1:0)};export{u as a,g as b,p as f,w as g};
