var C=Object.defineProperty,S=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var b=(s,t,e)=>t in s?C(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,f=(s,t)=>{for(var e in t||(t={}))D.call(t,e)&&b(s,e,t[e]);if(g)for(var e of g(t))H.call(t,e)&&b(s,e,t[e]);return s},p=(s,t)=>S(s,B(t));import{D as z,a5 as A,S as E,i as F,s as q,e as I,W as J,c as K,a as v,X as N,d as u,a6 as h,a7 as _,b as O,g as m,J as P,O as U,P as V,z as W,l as j,K as k,C as X}from"./vendor-c4bd8a8d.js";import{s as Z}from"./index-03ab0e3d.js";const x=s=>fetch(`https://openlibrary.org${s}`).then(t=>t.json()),G=async s=>{let t="q=";return s.author&&(t=`author=${s.author}`),s.default&&(t=`q=${s.default}`),(await x(`/search.json?${t}`)).docs},Q={added:{style:[["background","#0f0a"]]},suggest:{"data-func":"add",style:[["background","#0aff"]]},error:{style:[["background","#f00a"]]},todo:{"data-func":"add",style:[["background","#0cc"]]}},R={error:[{tag:"path",attributes:[["d","M2 30 L30 2 M30 30 L2 2"]]}],added:[{tag:"path",attributes:[["d","M2 20 L12 28 30 4"]]}],suggest:[{tag:"path",attributes:[["d","M16 2 L16 30 M2 16 L30 16"]]}],todo:[{tag:"path",attributes:[["d","M2 20 L12 28 30 4"]]}]};var w={objective:Q,icons:R};const T=z([]),Y=s=>s?s.filter(t=>!/[^a-zA-Z]/i.test(t)).map(t=>t.toLowerCase().trim()).slice(0,4).join(", "):[],$=s=>{if(!s)return"Unknown";if(typeof s=="string")return s;if(typeof s=="object"){const t=[...new Set(s.map(e=>e.trim()))];return t.length>3?`${t.slice(0,3).join(", ")} et al.`:t.join(", ")}},tt=s=>{if(s.length===0)return null;if(typeof s=="string")return+s;if(typeof s=="object")return+s[0]},y={basic:s=>{let t="default",e="";return s.split(":").length>1?[t,e]=s.split(":"):e=s,[e,t].map(a=>a.trim().toLowerCase()),{type:t,text:e}},search:s=>{const{type:t,text:e}=y.basic(s);return t==="author"?{author:e}:{default:e}}},et=s=>{let t="suggest";const e=s.cover_edition_key||s.bk_id||s.id;return A(T).includes(e)&&(t="added"),p(f({},s),{objective:t})},st=s=>{var a;const t=f({},w.objective[s]),e=(a=t.style)==null?void 0:a.map(o=>o.join(":")).join(";");return t.style=e,t},at=s=>{var e;const t=(e=w.icons[s])==null?void 0:e.map(a=>{var i;const o=a.tag,l=(i=a.attributes)==null?void 0:i.map(r=>`${r[0]}="${r[1]}"`).join(" ");return`<${o} ${l}/>`});return t==null?void 0:t.join(" ")},lt={search:G},d={author:$,tags:Y,published:tt,results:et,form:y,attributes:st,icons:at};function L(s){let t,e,a=d.icons(s[0])+"",o,l,i=[d.attributes(s[0]),{viewBox:"0 0 32 32"},{fill:"none"},{stroke:"#fff"}],r={};for(let n=0;n<i.length;n+=1)r=X(r,i[n]);return{c(){t=I("div"),e=J("svg"),this.h()},l(n){t=K(n,"DIV",{class:!0});var c=v(t);e=N(c,"svg",{viewBox:!0,fill:!0,stroke:!0});var M=v(e);M.forEach(u),c.forEach(u),this.h()},h(){h(e,r),_(e,"svelte-1wfwwk",!0),O(t,"class","funcs \u0192 hover \u2206-bw p10 p-abs svelte-1wfwwk")},m(n,c){m(n,t,c),P(t,e),e.innerHTML=a,o||(l=U(t,"click",V(s[1])),o=!0)},p(n,c){c&1&&a!==(a=d.icons(n[0])+"")&&(e.innerHTML=a),h(e,r=W(i,[c&1&&d.attributes(n[0]),{viewBox:"0 0 32 32"},{fill:"none"},{stroke:"#fff"}])),_(e,"svelte-1wfwwk",!0)},d(n){n&&u(t),o=!1,l()}}}function nt(s){let t,e=s[0]&&L(s);return{c(){e&&e.c(),t=j()},l(a){e&&e.l(a),t=j()},m(a,o){e&&e.m(a,o),m(a,t,o)},p(a,[o]){a[0]?e?e.p(a,o):(e=L(a),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:k,o:k,d(a){e&&e.d(a),a&&u(t)}}}function ot(s,t,e){let{objective:a="sugg",data:o={title:"",image:"",tags:"",id:"",published:"",author:""}}=t;const l=r=>Z.put("books",Date.now().toString(36),r).then(n=>{console.log(n),n.charAt(0)=='"'?e(0,a="added"):e(0,a="error")}),i=r=>{const{func:n}=r.target.dataset;n==="add"&&l(o)};return s.$$set=r=>{"objective"in r&&e(0,a=r.objective),"data"in r&&e(2,o=r.data)},[a,i,o]}class ut extends E{constructor(t){super();F(this,t,ot,nt,q,{objective:0,data:2})}}export{ut as F,lt as a,T as b,d as p};
