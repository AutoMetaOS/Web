import{$ as d,C as h}from"./vendor-50ecb96e.js";const w="https://api.nukes.in/",_=e=>{const s=`"${e.type}":"${e.url}","title":"${e.title}","image":"${e.image}"`;return btoa(s)},c=async e=>await(await fetch(w+e)).text(),m={list:async e=>await c(`${e}/list`),get:async(e,s)=>await c(`${e}/get?id=${s}`),delete:async(e,s)=>await c(`${e}/delete?id=${s}`),put:async(e,s,a)=>await c(`${e}/put?id=${s}&value=${_(a)}`)},u=h([]);m.list("amos").then(e=>{JSON.parse(e).forEach(s=>{const a=s.name;m.get("amos",a).then(o=>{const r=JSON.parse(`{${o}}`);r.id=a,u.set([...d(u),g(r)])})})});function g(e){const{image:s,title:a,id:o}=e,r=Object.keys(e)[0],p=e[r];return{id:o,title:a,image:s,type:r,url:p}}const $=async e=>{const s=e.map(t=>fetch("http://api.tvmaze.com/singlesearch/shows?q="+t.name)),a=await Promise.all(s).then(async t=>Promise.all(t.map(async n=>await n.json()))),o=a.map(t=>{var n,i;return console.log(t._links),fetch((i=(n=t._links)==null?void 0:n.previousepisode)==null?void 0:i.href.replace("http:","https:"))});return(await Promise.all(o).then(async t=>Promise.all(t.map(async n=>await n.json())))).map((t,n)=>{var i,l;return{key:n,name:e[n].name,last_seen:+new Date(e[n].day)+864e5,airstamp:+new Date(t.airstamp),ep:t.name,abt:t.summary||"No Description Available",image:((i=t.image)==null?void 0:i.original)||((l=a[n].image)==null?void 0:l.original)}}).filter((t,n)=>t.last_seen<t.airstamp?1:0)};export{u as f,$ as g};
