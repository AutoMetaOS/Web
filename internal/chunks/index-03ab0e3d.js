const f=e=>{var t;return(t=new URL(e||"https://os.nukes.in"))==null?void 0:t.hostname.replace(/^www\./,"")},u=({url:e,image:t})=>t||((e==null?void 0:e.includes("wikipedia"))?"https://wallpaperaccess.com/full/7408458.png":"/OUI/icons/amos.png"),d=e=>e==="Video"?"#f00":e==="Collection"?"#ff0":e==="Reference"?"#2af":e==="Repository"?"#a2f":"#fff",c=["Article","Collection","Reference","Repository","Video"],m=async e=>{let t={title:"",image:"",type:""};if(e.includes("youtube")&&(t.type="Video",t.image="https://i.ytimg.com/vi/"+e.split("v=")[1].split("&")[0]+"/maxresdefault.jpg"),e.includes("youtu.be"))t.type="Video",t.image="https://i.ytimg.com/vi/"+e.split(".be/")[1].split("?")[0]+"/maxresdefault.jpg";else{const s=await fetch(`https://api.nukes.in/quick/metadata?url=${e}`).then(n=>n.json()),a=s==null?void 0:s.meta;a&&(t.title=a.title,t.image=a.image,t.type=a.type||"Article")}return t},o="https://api.nukes.in/",p=e=>{let t="";return e.type&&(t+=`"${e.type}":"${e.url}",`),delete e.type,delete e.url,Object.keys(e).forEach(s=>{typeof e[s]=="string"&&(e[s]=e[s].replace(/"/g,"'").replaceAll("undefined","")),t+=`"${s}":"${e[s]}",`}),btoa(t)},r=async e=>await(await fetch(o+e)).text(),l=e=>{for(const t of c)e.hasOwnProperty(t)&&(e.type=t,e.url=e[t],delete e[t]);return e},i=e=>JSON.parse(e).map(t=>JSON.parse(`{${t}}`.replaceAll(",}","}"))).map(l),y={type:async(e,t)=>{const s=await r(`amos/type?db=${e}&q=${t}`);return i(s)},list:async e=>{const t=await r(`amos/all?db=${e}`);return i(t)},get:async(e,t)=>await r(`amos/get?db=${e}&id=${t}`),delete:async(e,t)=>await r(`amos/delete?db=${e}&id=${t}`),put:async(e,t,s)=>await r(`amos/put?db=${e}&id=${t}&value=${p(s)}`)};export{c as a,m as g,u as i,y as s,d as t,f as u};
