import{$ as f,D as m,a5 as _}from"./vendor-1a0fbb3d.js";const $={AES_KEY:"Punam@2601",YT_KEY:"AIzaSyDFZfyjFBWARwcMJp1aGxwV5HxXADV25H8",db:{pub:"hmwaoksv",priv:"8894c311-8da2-46ed-b961-ab8102398a72",user:"AMOSdb",pass:"kyCpor-3punqi-pyfryr"}},i=$.YT_KEY,l=t=>fetch("https://youtube.googleapis.com/youtube/v3"+t,{method:"GET",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer"}).then(e=>e.json()),D=(t,e=3)=>l(`/playlistItems?part=snippet%2CcontentDetails&playlistId=${t}&key=${i}&maxResults=${e}`),k=t=>l(`/search?part=snippet&key=${i}&q=${t}&type=video&maxResults=10`),x=t=>l(`/search?channelId=${t}&part=snippet&order=date&maxResults=5&key=${i}`),E=async t=>{const e=`/channels?part=snippet%2CcontentDetails&id=${t.map(a=>a.id).join("%2C")}&key=${i}`,o=await l(e);return o.error&&alert("QUOTA EXCEEDED"),(await Promise.all(o.items.map(a=>a.contentDetails.relatedPlaylists.uploads).map(async a=>(await D(a+"&order=date",5)).items))).flat().filter(a=>(new Date-new Date(a.contentDetails.videoPublishedAt))/864e5<8)},{F:r}=f,g=m({local_id:"yt-"+1e11,youtube_id:null}),h=m({show_next:!1}),w=t=>{console.log(t);const{slug:e,title:o,id:s}=t,n=`https://www.youtube-nocookie.com/embed/${e}?autoplay=1&enablejsapi=1&local=${s}`;return window.history.pushState("","",`?id=${e}`),g.set({local_id:s,youtube_id:n}),window.scrollTo(0,0),document.title=o,0},b=t=>{var u,y,d;t||(t=(y=(u=r("iframe"))==null?void 0:u.src)==null?void 0:y.split("local=")[1].split("&")[0]);const e=t==null?void 0:t.split("-");console.log(t,e,r("iframe"),(d=r("iframe"))==null?void 0:d.src);const[o,s]=[e[0]||yt,+e[1]||0];if(console.log(o,s),s===0)return null;const n=r(`#${o}-${s-1}`)||null,{title:a,slug:p}=(n==null?void 0:n.dataset)||{};return{next:n,type:o==="yt"?"snippet":"stack",count:s-1,image:n==null?void 0:n.querySelector("img").src,title:a,slug:p}},L=t=>{b(t)&&w(b(t))},{F:A}=f;let c=0,S=()=>c>=300?"long":"soft";const T=t=>{A("#magicBox"),t.fracLeft<=.05||t.timeLeft<=30?h.set({show_next:!0}):h.set({show_next:!1}),(t.fracLeft<=.01||t.timeLeft<=5)&&L(_(g).local_id)},j=t=>{if(t.data.charAt(0)!=="{")return;const{duration:e,currentTime:o}=JSON.parse(t.data).info||{};e&&(c=e);const s=~~(c-o),n={timeLeft:s||c,fracLeft:s?s/c:1,type:S()};return T(n),0},v=(t,e)=>{const o=JSON.stringify(e);(t==null?void 0:t.contentWindow)&&t.contentWindow.postMessage(o,"*")},C=t=>{t=0|(Date.now()-new Date(t))/1e3;let e,o={second:60,minute:60,hour:24,day:7,week:4.35,month:12,year:1e4},s;for(e in o)if(s=t%o[e],!(t=0|t/o[e]))return s+" "+(s-1?e+"s":e)},Y={search:k,channel:x,getRecents:E},F={videoSet:w,onMessage:j,postMessage:v,timeSince:C};export{h as a,b as g,g as n,F as p,Y as y};
