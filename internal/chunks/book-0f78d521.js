import{S as $,i as ee,s as te,e as f,k,t as V,c as d,a as j,m as w,h as q,d as _,M as H,b as n,g as se,J as a,j as N,K as Q}from"./vendor-1a0fbb3d.js";const ie=e=>fetch(`https://openlibrary.org${e}`).then(t=>t.json()),ae=async e=>{let t="q=";return e.author&&(t=`author=${e.author}`),(await ie(`/search.json?${t}`)).docs},re=e=>e?`https://covers.openlibrary.org/b/id/${e}-M.jpg`:"https://openlibrary.org/images/icons/avatar_book-sm.png",S=e=>typeof S=="string"?S:typeof S=="object"?S[0]:"UNKNOWN",T=e=>{if(typeof e=="string")return T;if(typeof e=="object"){const t=[...new Set(e.map(s=>s.trim()))];return t.length>3?`${t.slice(0,3).join(", ")} et al.`:t.join(", ")}},ce={search:ae},B={image:re,isbn:S,author:T};function le(e){let t,s,b,y,o,u,g,I,h,v=B.author(e[7])+"",i,A,c,p,G,F=e[6][0]+"",C,J,L,O,D,M=e[3].filter(X).map(x).slice(0,4).join(", ")+"",K,R,P,z;return{c(){t=f("div"),s=f("img"),y=k(),o=f("div"),u=f("div"),g=V(e[0]),I=k(),h=f("div"),i=V(v),A=k(),c=f("div"),p=f("i"),G=V("First Published "),C=V(F),J=k(),L=f("br"),O=k(),D=f("div"),K=V(M),R=k(),P=V(e[2]),this.h()},l(l){t=d(l,"DIV",{id:!0,class:!0});var r=j(t);s=d(r,"IMG",{src:!0,alt:!0,class:!0}),y=w(r),o=d(r,"DIV",{class:!0});var E=j(o);u=d(E,"DIV",{id:!0,class:!0});var W=j(u);g=q(W,e[0]),W.forEach(_),I=w(E),h=d(E,"DIV",{});var Y=j(h);i=q(Y,v),Y.forEach(_),A=w(E),c=d(E,"DIV",{class:!0});var m=j(c);p=d(m,"I",{class:!0});var U=j(p);G=q(U,"First Published "),C=q(U,F),U.forEach(_),J=w(m),L=d(m,"BR",{}),O=w(m),D=d(m,"DIV",{class:!0});var Z=j(D);K=q(Z,M),Z.forEach(_),R=w(m),P=q(m,e[2]),m.forEach(_),E.forEach(_),r.forEach(_),this.h()},h(){H(s.src,b=B.image(e[1]))||n(s,"src",b),n(s,"alt",e[0]),n(s,"class","svelte-1yo3vmp"),n(u,"id",e[5]),n(u,"class","fw4"),n(p,"class","published svelte-1yo3vmp"),n(D,"class","tags svelte-1yo3vmp"),n(c,"class","p5"),n(o,"class","p10"),n(t,"id",z=B.isbn(e[4])),n(t,"class","book \u0192 m10 svelte-1yo3vmp")},m(l,r){se(l,t,r),a(t,s),a(t,y),a(t,o),a(o,u),a(u,g),a(o,I),a(o,h),a(h,i),a(o,A),a(o,c),a(c,p),a(p,G),a(p,C),a(c,J),a(c,L),a(c,O),a(c,D),a(D,K),a(c,R),a(c,P)},p(l,[r]){r&2&&!H(s.src,b=B.image(l[1]))&&n(s,"src",b),r&1&&n(s,"alt",l[0]),r&1&&N(g,l[0]),r&32&&n(u,"id",l[5]),r&128&&v!==(v=B.author(l[7])+"")&&N(i,v),r&64&&F!==(F=l[6][0]+"")&&N(C,F),r&8&&M!==(M=l[3].filter(X).map(x).slice(0,4).join(", ")+"")&&N(K,M),r&4&&N(P,l[2]),r&16&&z!==(z=B.isbn(l[4]))&&n(t,"id",z)},i:Q,o:Q,d(l){l&&_(t)}}}const X=e=>!/[^a-zA-Z]/i.test(e),x=e=>e.toLowerCase();function ne(e,t,s){let{title:b="",image:y="",description:o="",tags:u=[],isbn:g,id:I,published:h=new Date().getFullYear(),author:v=""}=t;return e.$$set=i=>{"title"in i&&s(0,b=i.title),"image"in i&&s(1,y=i.image),"description"in i&&s(2,o=i.description),"tags"in i&&s(3,u=i.tags),"isbn"in i&&s(4,g=i.isbn),"id"in i&&s(5,I=i.id),"published"in i&&s(6,h=i.published),"author"in i&&s(7,v=i.author)},[b,y,o,u,g,I,h,v]}class ue extends ${constructor(t){super();ee(this,t,ne,le,te,{title:0,image:1,description:2,tags:3,isbn:4,id:5,published:6,author:7})}}export{ue as B,ce as a};
