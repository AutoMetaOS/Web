import{S as Q,i as R,s as Y,w as $,x as F,y as G,q as w,o as N,B as H,e as S,t as j,k as B,c as k,a as A,h as C,d as D,m as O,b as _,f as K,g as W,J as h,N as V,O as T,j as X,p as Z,Y as x,Q as ee,v as te,n as se,a2 as ne}from"../../../chunks/vendor-1a0fbb3d.js";import{p as z,y as ae,c as le}from"../../../chunks/index-f966bf0b.js";import ie from"../components/videoCard.svelte-091cdb44.js";function J(l,s,i){const e=l.slice();return e[6]=s[i],e[8]=i,e}function L(l){let s,i;return s=new ie({props:{type:"snippet",count:l[8],title:l[6].snippet.title,slug:l[6].snippet.resourceId.videoId,image:l[6].snippet.thumbnails.medium.url,details:[l[6].snippet.channelTitle,z.timeSince(l[6].contentDetails.videoPublishedAt)]}}),{c(){$(s.$$.fragment)},l(e){F(s.$$.fragment,e)},m(e,c){G(s,e,c),i=!0},p(e,c){const u={};c&3&&(u.title=e[6].snippet.title),c&3&&(u.slug=e[6].snippet.resourceId.videoId),c&3&&(u.image=e[6].snippet.thumbnails.medium.url),c&3&&(u.details=[e[6].snippet.channelTitle,z.timeSince(e[6].contentDetails.videoPublishedAt)]),s.$set(u)},i(e){i||(w(s.$$.fragment,e),i=!0)},o(e){N(s.$$.fragment,e),i=!1},d(e){H(s,e)}}}function oe(l){let s,i,e,c,u=l[1].length+"",f,b,I,p,r,g,P,v,y,U,m=l[1].sort(l[5]).slice(0,l[0]*5),a=[];for(let t=0;t<m.length;t+=1)a[t]=L(J(l,m,t));const M=t=>N(a[t],1,1,()=>{a[t]=null});return{c(){s=S("section"),i=S("div"),e=S("span"),c=j("Updates ("),f=j(u),b=j(")"),I=B(),p=S("span"),r=S("input"),P=B();for(let t=0;t<a.length;t+=1)a[t].c();this.h()},l(t){s=k(t,"SECTION",{class:!0,id:!0});var o=A(s);i=k(o,"DIV",{class:!0});var n=A(i);e=k(n,"SPAN",{});var d=A(e);c=C(d,"Updates ("),f=C(d,u),b=C(d,")"),d.forEach(D),I=O(n),p=k(n,"SPAN",{style:!0});var q=A(p);r=k(q,"INPUT",{type:!0,min:!0,max:!0}),q.forEach(D),n.forEach(D),P=O(o);for(let E=0;E<a.length;E+=1)a[E].l(o);o.forEach(D),this.h()},h(){_(r,"type","range"),_(r,"min",0),_(r,"max",g=l[1].flat().length/5),K(p,"font-size","1.25rem"),_(i,"class","w-100 \u0192 p5 \u2206-bw"),_(s,"class","\u0192 p20 \u0192\u2211"),_(s,"id","updates")},m(t,o){W(t,s,o),h(s,i),h(i,e),h(e,c),h(e,f),h(e,b),h(i,I),h(i,p),h(p,r),V(r,l[0]),h(s,P);for(let n=0;n<a.length;n+=1)a[n].m(s,null);v=!0,y||(U=[T(e,"click",l[2]),T(r,"change",l[4]),T(r,"input",l[4])],y=!0)},p(t,[o]){if((!v||o&2)&&u!==(u=t[1].length+"")&&X(f,u),(!v||o&2&&g!==(g=t[1].flat().length/5))&&_(r,"max",g),o&1&&V(r,t[0]),o&3){m=t[1].sort(t[5]).slice(0,t[0]*5);let n;for(n=0;n<m.length;n+=1){const d=J(t,m,n);a[n]?(a[n].p(d,o),w(a[n],1)):(a[n]=L(d),a[n].c(),w(a[n],1),a[n].m(s,null))}for(se(),n=m.length;n<a.length;n+=1)M(n);Z()}},i(t){if(!v){for(let o=0;o<m.length;o+=1)w(a[o]);v=!0}},o(t){a=a.filter(Boolean);for(let o=0;o<a.length;o+=1)N(a[o]);v=!1},d(t){t&&D(s),x(a,t),y=!1,ee(U)}}}function re(l,s,i){let e,{set:c}=s;const u=()=>i(1,e=[]);let f=3;te(()=>{Promise.all(c==null?void 0:c.map(r=>ae.getRecents(r.channels))).then(r=>{i(1,e=r.flat());const g=e.map(P=>P.channelId);le.set(g)})});function b(){f=ne(this.value),i(0,f)}const I=(p,r)=>new Date(r.contentDetails.videoPublishedAt)-new Date(p.contentDetails.videoPublishedAt);return l.$$set=p=>{"set"in p&&i(3,c=p.set)},i(1,e=[]),[f,e,u,c,b,I]}class he extends Q{constructor(s){super();R(this,s,re,oe,Y,{set:3})}}export{he as default};
