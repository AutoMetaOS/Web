import{$ as O,S,i as B,s as C,e as g,k as D,t as w,c as h,a as k,d as m,m as J,h as y,b as o,M as j,g as I,J as _,O as R,P as q,j as A,l as L,K as M,R as E,v as F,a1 as H}from"../../../chunks/vendor-88a0371f.js";import{t as P,a as T}from"../../../chunks/store-7b5e326d.js";const{F:V}=O;let v=0,W=()=>v>=300?"long":"soft";const K=a=>{const s=V("#magicBox");a.timeLeft<=10?s.classList.add("visible"):s.classList.remove("visible")},U=a=>{const{duration:s,currentTime:e}=JSON.parse(a.data).info;s&&(v=s);const t=~~(v-e),i={timeLeft:t||v,fracLeft:t?t/v:1,type:W()};return K(i),console.log(i),0},x=(a,s)=>{const e=JSON.stringify(s);(a==null?void 0:a.contentWindow)&&a.contentWindow.postMessage(e,"*")};function N(a){let s,e,t,i,n,u,d=a[1].join(",")+"",f,p,l;return{c(){s=g("div"),e=g("iframe"),i=D(),n=g("div"),u=w("Hi "),f=w(d),this.h()},l(c){s=h(c,"DIV",{class:!0});var r=k(s);e=h(r,"IFRAME",{title:!0,class:!0,framebor:!0,der:!0,src:!0,allow:!0,sandbox:!0}),k(e).forEach(m),i=J(r),n=h(r,"DIV",{id:!0,class:!0});var b=k(n);u=y(b,"Hi "),f=y(b,d),b.forEach(m),r.forEach(m),this.h()},h(){o(e,"title","vid"),o(e,"class","w-100 h-100 p-abs svelte-i0o3i2"),o(e,"framebor",""),o(e,"der","0"),j(e.src,t=a[2])||o(e,"src",t),o(e,"allow",a[3]),o(e,"sandbox",a[4]),o(n,"id","magicBox"),o(n,"class","fw5 p10 p-abs visible svelte-i0o3i2"),o(s,"class","\u0192 cont p-rel \u2206-ct svelte-i0o3i2")},m(c,r){I(c,s,r),_(s,e),a[6](e),_(s,i),_(s,n),_(n,u),_(n,f),p||(l=R(n,"click",q(a[5])),p=!0)},p(c,r){r&4&&!j(e.src,t=c[2])&&o(e,"src",t),r&2&&d!==(d=c[1].join(",")+"")&&A(f,d)},d(c){c&&m(s),a[6](null),p=!1,l()}}}function z(a){let s,e=a[2]&&N(a);return{c(){e&&e.c(),s=L()},l(t){e&&e.l(t),s=L()},m(t,i){e&&e.m(t,i),I(t,s,i)},p(t,[i]){t[2]?e?e.p(t,i):(e=N(t),e.c(),e.m(s.parentNode,s)):e&&(e.d(1),e=null)},i:M,o:M,d(t){e&&e.d(t),t&&m(s)}}}function G(a,s,e){let t,i;E(a,P,l=>e(1,t=l)),E(a,T,l=>e(2,i=l));let n;const u=["fullscreen","clipboard-write","encrypted-media","picture-in-picture"].join(";"),d=["allow-scripts","allow-same-origin"].join(" "),f=l=>{console.log(t)};F(()=>{window.addEventListener("message",U,!1);const l={event:"listening"};setInterval(()=>x(n,l),1e3)});function p(l){H[l?"unshift":"push"](()=>{n=l,e(0,n)})}return[n,t,i,u,d,f,p]}class Y extends S{constructor(s){super();B(this,s,G,z,C,{})}}export{Y as default};
